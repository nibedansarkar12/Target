<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>Admin Panel - Target Zone</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 py-8 px-4">

  <div class="max-w-xl mx-auto bg-white p-6 rounded shadow">
    <h2 class="text-xl font-bold mb-4">ржкрзНрж░рж╢рзНржи ржпрзБржХрзНржд ржХрж░рзБржи</h2>

    <!-- тЬЕ ржкрж░рзАржХрзНрж╖рж╛рж░ ржирж╛ржо -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700">Exam</label>
      <select id="exam" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
        <option value="">--Select Exam--</option>
        <option value="ssc">SSC</option>
        <option value="railways">Railways</option>
        <option value="tet">TET</option>
        <option value="wbset">WB SET</option>
        <option value="wbjee">WBJEE</option>
        <option value="madhyamik">Madhyamik</option>
      </select>
    </div>

    <!-- тЬЕ рж╕рзЗржЯ -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700">Set (ржпрзЗржоржиржГ Set A)</label>
      <input type="text" id="set" placeholder="Set A" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" required>
    </div>

    <!-- тЬЕ ржкрзНрж░рж╢рзНржи -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700">Question ID</label>
      <input type="number" id="id" placeholder="1" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 sm:text-sm">
    </div>

    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700">Question</label>
      <textarea id="question" rows="2" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 sm:text-sm"></textarea>
    </div>

    <!-- тЬЕ ржЕржкрж╢ржи -->
    <div class="grid grid-cols-2 gap-4">
      <input id="option1" type="text" placeholder="Option 1" class="rounded border-gray-300 p-2">
      <input id="option2" type="text" placeholder="Option 2" class="rounded border-gray-300 p-2">
      <input id="option3" type="text" placeholder="Option 3" class="rounded border-gray-300 p-2">
      <input id="option4" type="text" placeholder="Option 4" class="rounded border-gray-300 p-2">
    </div>

    <div class="mt-4">
      <label class="block text-sm font-medium text-gray-700">Correct Answer</label>
      <input id="answer" type="text" placeholder="Write correct option exactly" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 sm:text-sm">
    </div>

    <!-- тЬЕ Add button -->
    <div class="mt-6">
      <button onclick="addQuestion()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded">тЮХ ржкрзНрж░рж╢рзНржи ржпрзБржХрзНржд ржХрж░рзБржи</button>
    </div>

    <!-- тЬЕ ржкрзНрж░рж╢рзНржи ржжрзЗржЦрж╛рж░ ржмрж╛ржЯржи ржУ рж▓рж┐рж╕рзНржЯ -->
    <div class="mt-6">
      <button onclick="loadQuestions()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded">ЁЯУД ржкрзНрж░рж╢рзНржи ржжрзЗржЦрзБржи</button>
      <ul id="question-list" class="mt-4 space-y-2 text-sm text-gray-800 bg-white p-4 rounded"></ul>
    </div>
  </div>

  <!-- тЬЕ Firebase + Script -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import {
      getFirestore, collection, addDoc, getDocs
    } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCR5rqthBh0vX0yLOcOG3b9xJiKbYtzdxU",
      authDomain: "target-zone-8fffd.firebaseapp.com",
      projectId: "target-zone-8fffd",
      storageBucket: "target-zone-8fffd.appspot.com",
      messagingSenderId: "667579216123",
      appId: "1:667579216123:web:37bb1fcc724743073d005e"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    window.addQuestion = async () => {
      const exam = document.getElementById("exam").value;
      const set = document.getElementById("set").value.trim();
      const id = parseInt(document.getElementById("id").value);
      const question = document.getElementById("question").value;
      const options = [
        document.getElementById("option1").value,
        document.getElementById("option2").value,
        document.getElementById("option3").value,
        document.getElementById("option4").value
      ];
      const answer = document.getElementById("answer").value;

      if (!exam || !set || !id || !question || options.some(opt => !opt) || !answer) {
        alert("тЪая╕П рж╕ржм ржШрж░ ржкрзВрж░ржг ржХрж░рзБржиред");
        return;
      }

      await addDoc(collection(db, `${exam}_sets/${set}/questions`), {
        id,
        question,
        options,
        answer
      });

      alert("тЬЕ ржкрзНрж░рж╢рзНржи рж╕ржлрж▓ржнрж╛ржмрзЗ ржпрзЛржЧ рж╣ржпрж╝рзЗржЫрзЗ!");

      document.getElementById("id").value = "";
      document.getElementById("question").value = "";
      document.getElementById("option1").value = "";
      document.getElementById("option2").value = "";
      document.getElementById("option3").value = "";
      document.getElementById("option4").value = "";
      document.getElementById("answer").value = "";
    };

    window.loadQuestions = async () => {
      const exam = document.getElementById("exam").value;
      const set = document.getElementById("set").value.trim();
      const list = document.getElementById("question-list");
      list.innerHTML = "тП│ ржкрзНрж░рж╢рзНржи рж▓рзЛржб рж╣ржЪрзНржЫрзЗ...";
      if (!exam || !set) {
        list.innerHTML = "тЪая╕П ржжржпрж╝рж╛ ржХрж░рзЗ Exam ржПржмржВ Set ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи";
        return;
      }
      const snap = await getDocs(collection(db, `${exam}_sets/${set}/questions`));
      if (snap.empty) {
        list.innerHTML = "тЭМ ржПржЗ рж╕рзЗржЯрзЗ ржХрзЛржи ржкрзНрж░рж╢рзНржи ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ржирж┐ред";
        return;
      }
      list.innerHTML = "";
      snap.forEach(doc => {
        const q = doc.data();
        list.innerHTML += `<li><strong>Q${q.id}:</strong> ${q.question}</li>`;
      });
    };
  </script>
</body>
</html>

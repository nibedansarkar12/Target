<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>Target Zone - Premium Admin Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <style>
    body { margin:0; height:100vh; font-family:'Segoe UI',sans-serif; overflow:hidden; }
    canvas { position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1; }
    .slideshow{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;}
    .slideshow img{position:absolute;width:100%;height:100%;object-fit:cover;opacity:0;animation:slideShow 30s infinite;}
    .slideshow img:nth-child(1){animation-delay:0s;}
    .slideshow img:nth-child(2){animation-delay:10s;}
    .slideshow img:nth-child(3){animation-delay:20s;}
    @keyframes slideShow{0%{opacity:0;}10%{opacity:1;}30%{opacity:1;}40%{opacity:0;}100%{opacity:0;}}
    .slide-in{transform:translateX(0);transition:transform 0.4s ease-in-out;}
    .slide-out{transform:translateX(-100%);transition:transform 0.4s ease-in-out;}
    .glass{background:rgba(255,255,255,0.85);backdrop-filter:blur(12px);box-shadow:0 0 20px rgba(0,255,255,0.3);}
    .dark-mode .glass{background:rgba(30,41,59,0.85);color:white;}
    input,textarea,select{color:black;background:white;}
    .glow-btn{transition:all 0.3s ease-in-out;}
    .glow-btn:hover{transform:scale(1.05);box-shadow:0 0 15px rgba(255,255,255,0.7);}
    .sidebar-btn{transition:all 0.3s ease;}
    .sidebar-btn:hover{transform:translateX(5px) scale(1.1);text-shadow:0 0 10px #fff;}
    #music-btn{position:fixed;bottom:20px;right:20px;z-index:100;}
  </style>
</head>
<body class="flex h-screen">

  <!-- Background Random -->
  <div id="background"></div>

  <!-- Background Music -->
  <audio id="bg-music" autoplay loop>
    <source src="https://www.bensound.com/bensound-music/bensound-sunny.mp3" type="audio/mpeg">
  </audio>
  <button id="music-btn" onclick="toggleMusic()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-full glow-btn">🔊 Mute</button>

  <!-- Sidebar -->
  <aside id="sidebar" class="slide-out fixed top-0 left-0 h-full w-72 bg-gradient-to-b from-red-500 via-yellow-400 via-green-400 via-blue-500 to-purple-600 text-white shadow-xl z-50">
    <div class="flex items-center justify-between p-4 border-b border-white/20">
      <h1 class="text-xl font-bold drop-shadow">🌈 Target Zone</h1>
      <button onclick="toggleSidebar()" class="text-white text-2xl">✖</button>
    </div>
    <nav class="p-4 space-y-3">
      <button onclick="showSection('add')" class="sidebar-btn w-full px-4 py-2 rounded hover:bg-white/30 transition">➕ Add Question</button>
      <button onclick="showSection('bulk')" class="sidebar-btn w-full px-4 py-2 rounded hover:bg-white/30 transition">📥 Bulk Upload</button>
      <button onclick="showSection('manage')" class="sidebar-btn w-full px-4 py-2 rounded hover:bg-white/30 transition">📂 Manage Questions</button>
      <button onclick="showSection('results')" class="sidebar-btn w-full px-4 py-2 rounded hover:bg-white/30 transition">📊 Results & Leaderboard</button>
      <button onclick="showSection('users')" class="sidebar-btn w-full px-4 py-2 rounded hover:bg-white/30 transition">👥 Manage Users</button>
      <button onclick="showSection('settings')" class="sidebar-btn w-full px-4 py-2 rounded hover:bg-white/30 transition">⚙ Settings</button>
    </nav>
    <div class="p-4 border-t border-white/20">
      <button onclick="toggleDarkMode()" class="glow-btn w-full bg-white/30 hover:bg-white/50 px-4 py-2 rounded mb-2">🌙 Dark Mode</button>
      <button onclick="logout()" class="glow-btn w-full bg-red-600 hover:bg-red-700 px-4 py-2 rounded">🚪 Logout</button>
    </div>
  </aside>

  <!-- Content -->
  <div class="flex-1 flex flex-col overflow-hidden">
    <header class="glass shadow flex items-center justify-between p-4 m-4 rounded-lg">
      <button onclick="toggleSidebar()" class="text-3xl text-indigo-900 dark:text-yellow-300">☰</button>
      <h2 class="text-2xl font-bold text-indigo-900 dark:text-white drop-shadow">🛠️ Admin Panel</h2>
    </header>
    <main class="flex-1 p-6 overflow-y-auto space-y-6">

      <!-- Add Question -->
      <section id="section-add" class="hidden glass p-6 rounded-lg shadow-lg">
        <h3 class="text-xl font-semibold mb-4 border-b pb-2">➕ Add New Question</h3>
        <select id="exam-category" class="w-full border rounded-lg px-3 py-2 mb-3">
          <option value="ssc_gd">SSC GD</option>
          <option value="wbp_constable">WBP Constable</option>
          <option value="wbpsc_clerkship">WBPSC Clerkship</option>
          <option value="railway_ntpc">Railway NTPC</option>
          <option value="tet_primary">WB Primary TET</option>
        </select>
        <input type="number" id="set-number" class="w-full border rounded-lg px-3 py-2 mb-3" placeholder="Set Number">
        <textarea id="question" rows="3" class="w-full border rounded-lg px-3 py-2 mb-3" placeholder="প্রশ্ন লিখুন..."></textarea>
        <div class="grid grid-cols-2 gap-3">
          <input type="text" id="option1" class="border rounded-lg px-3 py-2" placeholder="Option 1">
          <input type="text" id="option2" class="border rounded-lg px-3 py-2" placeholder="Option 2">
          <input type="text" id="option3" class="border rounded-lg px-3 py-2" placeholder="Option 3">
          <input type="text" id="option4" class="border rounded-lg px-3 py-2" placeholder="Option 4">
        </div>
        <input type="text" id="answer" class="w-full border rounded-lg px-3 py-2 mt-3" placeholder="সঠিক উত্তর">
        <button onclick="addQuestion()" class="glow-btn w-full mt-4 bg-indigo-700 hover:bg-indigo-800 text-white py-2 rounded-lg">💾 Save Question</button>
        <p id="status" class="text-green-600 font-semibold mt-4"></p>
      </section>

      <!-- Bulk Upload -->
      <section id="section-bulk" class="hidden glass p-6 rounded-lg shadow-lg">
        <h3 class="text-xl font-semibold mb-4 border-b pb-2">📥 Bulk Upload (CSV)</h3>
        <input type="file" id="csv-file" accept=".csv" class="mb-3">
        <button onclick="uploadCSV()" class="glow-btn bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded">⬆ Upload</button>
      </section>

      <!-- Manage Questions -->
      <section id="section-manage" class="hidden glass p-6 rounded-lg shadow-lg">
        <h3 class="text-xl font-semibold mb-4 border-b pb-2">📂 Manage Questions</h3>
        <div id="questions-list" class="space-y-3 max-h-96 overflow-y-auto border rounded-lg p-3 bg-white/60 dark:bg-gray-800/70"></div>
      </section>

      <!-- Results -->
      <section id="section-results" class="hidden glass p-6 rounded-lg shadow-lg">
        <h3 class="text-xl font-semibold mb-4 border-b pb-2">📊 Results & Leaderboard</h3>
        <canvas id="resultChart" width="400" height="200" class="mb-6"></canvas>
        <div id="leaderboard" class="space-y-3"></div>
        <button onclick="downloadResultsExcel()" class="glow-btn bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded mt-4">⬇ Export Excel</button>
      </section>

      <!-- Users -->
      <section id="section-users" class="hidden glass p-6 rounded-lg shadow-lg">
        <h3 class="text-xl font-semibold mb-4 border-b pb-2">👥 Manage Users</h3>
        <div id="users-list" class="space-y-3 max-h-96 overflow-y-auto border rounded-lg p-3 bg-white/60 dark:bg-gray-800/70"></div>
      </section>

      <!-- Settings -->
      <section id="section-settings" class="hidden glass p-6 rounded-lg shadow-lg">
        <h3 class="text-xl font-semibold mb-4 border-b pb-2">⚙ Settings</h3>
        <button onclick="backupData()" class="glow-btn bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded">💾 Backup Data</button>
      </section>
    </main>
  </div>

  <script>
    // Sidebar Toggle
    const sidebar=document.getElementById("sidebar");
    function toggleSidebar(){ sidebar.classList.toggle("slide-in"); sidebar.classList.toggle("slide-out"); }
    function toggleDarkMode(){ document.body.classList.toggle("dark-mode"); }
    function showSection(section){ ["add","bulk","manage","results","users","settings"].forEach(s=>document.getElementById(`section-${s}`).classList.add("hidden")); document.getElementById(`section-${section}`).classList.remove("hidden"); }
    function logout(){ window.location.href="index.html"; }

    // Music
    const music=document.getElementById("bg-music");
    const musicBtn=document.getElementById("music-btn");
    function toggleMusic(){ if(music.paused){music.play();musicBtn.textContent="🔊 Mute";}else{music.pause();musicBtn.textContent="🔇 Unmute";} }

    // Background Randomizer
    const bg=document.getElementById("background");
    const modes=["stars","slideshow","flights"];
    const choice=modes[Math.floor(Math.random()*modes.length)];
    if(choice==="slideshow"){bg.innerHTML=`<div class="slideshow"><img src="https://images.unsplash.com/photo-1506748686214-e9df14d4d9d0?auto=format&fit=crop&w=1350&q=80"/><img src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=1350&q=80"/><img src="https://images.unsplash.com/photo-1503264116251-35a269479413?auto=format&fit=crop&w=1350&q=80"/></div>`;}
    if(choice==="stars"){const canvas=document.createElement("canvas");bg.appendChild(canvas);const ctx=canvas.getContext("2d");canvas.width=window.innerWidth;canvas.height=window.innerHeight;const stars=Array(200).fill().map(()=>({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*2}));function animate(){ctx.clearRect(0,0,canvas.width,canvas.height);ctx.fillStyle="white";stars.forEach(s=>{ctx.beginPath();ctx.arc(s.x,s.y,s.r,0,Math.PI*2);ctx.fill();s.y+=0.2;if(s.y>canvas.height)s.y=0;});requestAnimationFrame(animate);}animate();}
    if(choice==="flights"){const canvas=document.createElement("canvas");bg.appendChild(canvas);const ctx=canvas.getContext("2d");canvas.width=window.innerWidth;canvas.height=window.innerHeight;let planes=Array(5).fill().map(()=>({x:Math.random()*canvas.width,y:Math.random()*canvas.height,dx:2+Math.random()*2}));function animate(){ctx.clearRect(0,0,canvas.width,canvas.height);planes.forEach(p=>{ctx.fillStyle="yellow";ctx.fillRect(p.x,p.y,30,10);ctx.fillStyle="red";ctx.fillRect(p.x+30,p.y+4,10,2);p.x+=p.dx;if(p.x>canvas.width)p.x=-40;});requestAnimationFrame(animate);}animate();}
  </script>
</body>
</html>

<!DOCTYPE html><html lang="en"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel - Target Zone</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f4f6f8;
      margin: 0;
      padding: 0;
    }.header {
  background-color: #2c3e50;
  padding: 1rem;
  color: white;
  text-align: center;
  font-size: 1.5rem;
}

.container {
  max-width: 1000px;
  margin: 2rem auto;
  background-color: #fff;
  padding: 2rem;
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

.section-title {
  font-size: 1.3rem;
  margin-bottom: 1rem;
  border-left: 5px solid #3498db;
  padding-left: 10px;
  color: #2c3e50;
}

input, textarea, select, button {
  display: block;
  width: 100%;
  padding: 10px;
  margin-bottom: 1rem;
  border-radius: 5px;
  border: 1px solid #ccc;
}

button {
  background-color: #3498db;
  color: white;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.3s ease;
}

button:hover {
  background-color: #2980b9;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 2rem;
}

th, td {
  padding: 10px;
  text-align: left;
  border-bottom: 1px solid #ddd;
}

th {
  background-color: #f1f1f1;
}

.logout-btn {
  float: right;
  background: #e74c3c;
}

  </style>
</head><body>
  <div class="header">
    Admin Dashboard - Target Zone
    <button class="logout-btn" onclick="logout()">Logout</button>
  </div>  <div class="container">
    <div>
      <h2 class="section-title">➤ Add New Question</h2>
      <input type="text" id="questionText" placeholder="Enter Question">
      <input type="text" id="optionA" placeholder="Option A">
      <input type="text" id="optionB" placeholder="Option B">
      <input type="text" id="optionC" placeholder="Option C">
      <input type="text" id="optionD" placeholder="Option D">
      <input type="text" id="correctAnswer" placeholder="Correct Option (A/B/C/D)">
      <select id="language">
        <option value="bengali">Bengali</option>
        <option value="english">English</option>
        <option value="hindi">Hindi</option>
      </select>
      <button onclick="addQuestion()">Add Question</button>
    </div><div>
  <h2 class="section-title">➤ All Students</h2>
  <table id="studentTable">
    <thead>
      <tr>
        <th>Name</th>
        <th>Roll Number</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      <!-- Filled dynamically from Firebase -->
    </tbody>
  </table>
</div>

<div>
  <h2 class="section-title">➤ View All Questions</h2>
  <table id="questionTable">
    <thead>
      <tr>
        <th>Question</th>
        <th>Correct Answer</th>
        <th>Language</th>
      </tr>
    </thead>
    <tbody>
      <!-- Filled dynamically from Firebase -->
    </tbody>
  </table>
</div>

  </div>  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCR5rqthBh0vX0yLOcOG3b9xJiKbYtzdxU",
      authDomain: "target-zone-8fffd.firebaseapp.com",
      databaseURL: "https://target-zone-8fffd-default-rtdb.firebaseio.com",
      projectId: "target-zone-8fffd",
      storageBucket: "target-zone-8fffd.appspot.com",
      messagingSenderId: "667579216123",
      appId: "1:667579216123:web:37bb1fcc724743073d005e"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function addQuestion() {
      const qText = document.getElementById("questionText").value;
      const a = document.getElementById("optionA").value;
      const b = document.getElementById("optionB").value;
      const c = document.getElementById("optionC").value;
      const d = document.getElementById("optionD").value;
      const correct = document.getElementById("correctAnswer").value.toUpperCase();
      const lang = document.getElementById("language").value;

      const newQuestionRef = db.ref("questions").push();
      newQuestionRef.set({
        question: qText,
        options: { A: a, B: b, C: c, D: d },
        correctAnswer: correct,
        language: lang
      });

      alert("Question added successfully!");
      document.getElementById("questionText").value = "";
    }

    function loadStudents() {
      const tbody = document.querySelector("#studentTable tbody");
      db.ref("students").on("value", (snapshot) => {
        tbody.innerHTML = "";
        snapshot.forEach(child => {
          const data = child.val();
          const row = `<tr><td>${data.name}</td><td>${data.roll}</td><td>${data.status || 'Not Started'}</td></tr>`;
          tbody.innerHTML += row;
        });
      });
    }

    function loadQuestions() {
      const tbody = document.querySelector("#questionTable tbody");
      db.ref("questions").on("value", (snapshot) => {
        tbody.innerHTML = "";
        snapshot.forEach(child => {
          const data = child.val();
          const row = `<tr><td>${data.question}</td><td>${data.correctAnswer}</td><td>${data.language}</td></tr>`;
          tbody.innerHTML += row;
        });
      });
    }

    function logout() {
      firebase.auth().signOut().then(() => {
        window.location.href = "index.html";
      });
    }

    // Admin check
    firebase.auth().onAuthStateChanged((user) => {
      if (!user || user.email !== "nibedansarkar12@gmail.com") {
        alert("Unauthorized access. Redirecting...");
        window.location.href = "index.html";
      } else {
        loadStudents();
        loadQuestions();
      }
    });
  </script></body></html>
